# Spring profile for Docker environment
spring.application.name=armoire

# ==========================
# JWT Secret Key
# Use environment variable for security in production
# ==========================
jwt.secret=${JWT_SECRET:THISISMYSECURESECRETKEYFORJWTECOMMERCEBACKEND123456}

# ==========================
# Database Configuration
# Using environment variables for flexibility
# ==========================
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://host.docker.internal:5432/armoire}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.username=${DATABASE_USERNAME:postgres}
spring.datasource.password=${DATABASE_PASSWORD:postgres}

# PostgreSQL Connection Pool Settings - Fix for "cached plan must not change result type"
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.auto-commit=true

# PostgreSQL JDBC Properties to prevent prepared statement cache issues
spring.datasource.hikari.data-source-properties.prepareThreshold=0
spring.datasource.hikari.data-source-properties.preparedStatementCacheQueries=0
spring.datasource.hikari.data-source-properties.preparedStatementCacheSizeMiB=0

# ==========================
# JPA & Hibernate
# ==========================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.defer-datasource-initialization=false
spring.jpa.show-sql=true
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

# ==========================
# Mail Settings
# ==========================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# ==========================
# Redis Configuration
# ==========================
spring.data.redis.host=${REDIS_HOST:redis}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=60000
spring.data.redis.jedis.pool.max-active=8
spring.data.redis.jedis.pool.max-idle=8
spring.data.redis.jedis.pool.min-idle=0

# ==========================
# JWT Token Expiry Settings
# ==========================
jwt.access-token-expiration=${JWT_ACCESS_TOKEN_EXPIRATION:900000}
jwt.refresh-token-expiration=${JWT_REFRESH_TOKEN_EXPIRATION:604800000}
jwt.cookie.secure=${JWT_COOKIE_SECURE:false}

# ==========================
# App Settings
# ==========================
app.frontend-url=${FRONTEND_URL:http://localhost:3000}
app.verification-token-expiration=${VERIFICATION_TOKEN_EXPIRATION:86400000}

# Pagination defaults
spring.data.web.pageable.default-page-size=20
spring.data.web.pageable.max-page-size=100

# AWS S3 Configuration
aws.access.key=${AWS_ACCESS_KEY:}
aws.secret.key=${AWS_SECRET_KEY:}
aws.region=${AWS_REGION:eu-north-1}
aws.s3.bucket=${AWS_S3_BUCKET:nala-armorie-storage}
aws.cloudfront.domain=${AWS_CLOUDFRONT_DOMAIN:}

# Multipart Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Order Configuration
order.cancellation.hours=24
order.return.days=7

# Inventory Configuration
inventory.low-stock-threshold=10

# Shipping Cost Price
shipping.cost.price=100
shipping.threshold=1000

# GST
gst.rate=18

# Razorpay Configuration
razorpay.key.id=${RAZORPAY_KEY_ID:YOUR_RAZORPAY_KEY_ID}
razorpay.key.secret=${RAZORPAY_KEY_SECRET:YOUR_RAZORPAY_KEY_SECRET}
razorpay.currency=INR

# Admin Email
admin.email=${ADMIN_EMAIL:bunnyking828@gmail.com}

# ==========================
# OTP Configuration
# ==========================
otp.length=6
otp.expiration=300
otp.max-attempts=3
otp.rate-limit.max-requests=3
otp.rate-limit.window-seconds=600

# ==========================
# SMS Provider (Twilio)
# ==========================
twilio.account-sid=${TWILIO_ACCOUNT_SID:}
twilio.auth-token=${TWILIO_AUTH_TOKEN:}
twilio.phone-number=${TWILIO_PHONE_NUMBER:}
